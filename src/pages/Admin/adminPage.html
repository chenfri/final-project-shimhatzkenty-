<ion-content class="adminPage">

    <ion-grid class="adminHeader">

        <ion-row>
            <ion-col>
                <button class="buttons" type="submit" (click)="click_home()">חזרה לדף הבית</button>
            </ion-col>
            <ion-col>
                <h2 class="titleAdmin">דף ניהול</h2>
            </ion-col>
        </ion-row>
    </ion-grid> <br><br>

    <button class="buttons" type="submit" (click)="matchingAlgorithm()">הפעל את אלגוריתם ההתאמה</button>
    <button class="buttons" type="submit" (click)="manual_matching()"> בצע התאמה ידנית</button>
    <div class="tables">

        <h4 class="tableTitle">הודעות</h4>
        <table id="customers" class="message">
            <tr>
                <th>מחק הודעה</th>
                <th>הודעה</th>
                <th>טלפון</th>
                <th>שם מלא</th>
            </tr>


            <tr *ngFor="let value of messages">
                <td><button class="buttons del" (click)="deleteMessage(value.id)">[x]</button></td>
                <td style="direction: rtl;">{{value.data.message}}</td>
                <td>0{{value.data.phoneNumber}}</td>
                <td>{{value.data.fullName}}</td>
            </tr>
        </table><br><br>

        <h4 class="tableTitle">:קשישים שנרשמו</h4>
        <button class="buttons" type="submit" (click)="csvFile(userE ,'eledry')">ייצוא טבלת קשישים לאקסל</button><br><br>
        <table id="customers" class="table-style">
            <tr>
                <th class="hidePhone">מחק משתמש</th>
                <th class="hidePhone">הערות</th>
                <th>תאריך הרשמה</th>
                <th>פלאפון איש קשר</th>
                <th>שם איש קשר</th>
                <th>כתובת</th>
                <th>טלפון</th>
                <th>שם מלא</th>
                <th class="hidePhone">בחר להתאמה</th>
            </tr>
            <tr *ngFor="let value of userE">
                <td class="hidePhone"><button class="buttons del" (click)="deleteElderlyUser(value.docID)">[x]</button></td>
                <td class="hidePhone">
                    <ion-textarea cols="40" rows="2" type="text" name="comments" [(ngModel)]="value.adminComments" style="direction: rtl;"></ion-textarea>
                </td>
                <td>{{value.dateTime}}</td>
                <td>{{value.contact}}</td>
                <td>{{value.nameAssistant}}</td>
                <td>{{value.address}}</td>
                <td>0{{value.phone}}</td>
                <td>
                    <a class="info-button" (click)="openPopover($event, value.docID, 'elderly')">
                        <ion-icon name="ios-information-circle-outline"></ion-icon>
                    </a>
                    {{value.name}}
                </td>
                <td style="text-align: center;" class="hidePhone">
                    <ion-radio [checked]="value.manualM" (click)="elderlyRadioClicked(value.index)" color="adminpagebutton"></ion-radio>
                </td>
            </tr>
        </table><br><br>

        <button class="buttons hidePhone" type="submit" (click)="save_comments(userE, 'ElderlyUsers')">שמירת הערות</button>

        <h4 class="tableTitle">:מתנדבים שנרשמו</h4>
        <button class="buttons" type="submit" (click)="csvFile(userV, 'volunteer')">ייצוא טבלת מתנדבים לאקסל</button><br><br>

        <table id="customers" class="table-style">
            <tr>
                <th class="hidePhone">מחק משתמש</th>
                <th class="hidePhone">הערות</th>
                <th>סטודנט</th>
                <th>תאריך הרשמה</th>
                <th>כתובת</th>
                <th>טלפון</th>
                <th>שם מלא</th>
                <th class="hidePhone">בחר להתאמה</th>
            </tr>
            <tr *ngFor="let value of userV">
                <td class="hidePhone"><button class="buttons del" (click)="deleteVolunteerUser(value.docID)">[x]</button></td>
                <td class="hidePhone">
                    <ion-textarea cols="40" rows="2" type="text" name="comments" [(ngModel)]="value.adminComments" style="direction: rtl;"></ion-textarea>
                </td>
                <td>
                    <div *ngIf="value.student">כן</div>
                    <div *ngIf="!value.student">לא</div>
                </td>
                <td>{{value.dateTime}}</td>
                <td>{{value.address}}</td>
                <td>0{{value.phone}}</td>
                <td>
                    <a class="info-button" (click)="openPopover($event, value.docID, 'volunteer')">
                        <ion-icon name="ios-information-circle-outline"></ion-icon>
                    </a> {{value.name}}
                </td>
                <td style="text-align: center;" class="hidePhone">
                    <ion-radio [checked]="value.manualM" (click)="volunteerRadioClicked(value.index)" color="adminpagebutton"></ion-radio>
                </td>
            </tr>
        </table><br><br>

        <button class="buttons hidePhone" type="submit" (click)="save_comments(userV, 'volunteerUsers')">שמירת הערות</button>
        <br><br>
        <h4 class="tableTitle">:סטודנטים שנרשמו</h4>
        <button class="buttons" type="submit" (click)="csvFile(userV , 'student')">ייצוא טבלת סטודנטים לאקסל</button><br><br>
        <table id="customers" class="table-style">
            <tr>
                <th>מוסד אקדמי</th>
                <th>תעודת זהות</th>
                <th>טלפון</th>
                <th>שם מלא</th>
            </tr>
            <tr *ngFor="let value of userV">
                <td *ngIf="value.student">{{value.college}}</td>
                <td *ngIf="value.student">{{value.id}}</td>
                <td *ngIf="value.student">0{{value.phone}}</td>
                <td *ngIf="value.student">{{value.name}}</td>
            </tr>
        </table> <br><br>

        <div *ngIf="organizationEledry['יד שרה'] != undefined">
            <h4 class="tableTitle ">:קשישים שנרשמו דרך יד שרה</h4>
            <button class="buttons " type="submit " (click)="csvFile(organizationEledry[ 'יד שרה'], 'organization') ">ייצוא טבלת קשישים מיד שרה לאקסל</button><br><br>
            <table id="customers" class="table-style">
                <tr>
                    <th>שם הארגון</th>
                    <th>פלאפון איש קשר</th>
                    <th>שם איש קשר</th>
                    <th>טלפון קשיש</th>
                    <th>שם מלא</th>
                </tr>
                <tr *ngFor="let value of organizationEledry[ 'יד שרה'] ">
                    <td>{{value.id}}</td>
                    <td>0{{value.phoneA}}</td>
                    <td>{{value.assistName}}</td>
                    <td>0{{value.phoneE}}</td>
                    <td>{{value.name}}</td>
                </tr>
            </table><br><br>
        </div>

        <div *ngIf="organizationEledry[ 'מלבב'] != undefined">
            <h4 class="tableTitle">:קשישים שנרשמו דרך מלבב</h4>
            <button class="buttons" type="submit" (click)="csvFile(organizationEledry['מלבב'], 'organization')">ייצוא טבלת קשישים ממלבב לאקסל</button><br><br>
            <table id="customers" class="table-style">
                <tr>
                    <th>שם הארגון</th>
                    <th>פלאפון איש קשר</th>
                    <th>שם איש קשר</th>
                    <th>טלפון קשיש</th>
                    <th>שם מלא</th>
                </tr>
                <tr *ngFor="let value of organizationEledry['מלבב']">
                    <td>{{value.id}}</td>
                    <td>0{{value.phoneA}}</td>
                    <td>{{value.assistName}}</td>
                    <td>0{{value.phoneE}}</td>
                    <td>{{value.name}}</td>
                </tr>
            </table><br><br>
        </div>

        <div *ngIf="organizationEledry['עזר מציון'] != undefined">
            <h4 class="tableTitle ">:קשישים שנרשמו דרך עזר מציון</h4>
            <button class="buttons " type="submit " (click)="csvFile(organizationEledry[ 'עזר מציון'] , 'organization') ">ייצוא טבלת קשישים מעזר מציון לאקסל</button><br><br>
            <table id="customers " class="table-style ">
                <tr>
                    <th>שם הארגון</th>
                    <th>פלאפון איש קשר</th>
                    <th>שם איש קשר</th>
                    <th>טלפון קשיש</th>
                    <th>שם מלא</th>
                </tr>
                <tr *ngFor="let value of organizationEledry[ 'עזר מציון'] ">
                    <td>{{value.id}}</td>
                    <td>0{{value.phoneA}}</td>
                    <td>{{value.assistName}}</td>
                    <td>0{{value.phoneE}}</td>
                    <td>{{value.name}}</td>
                </tr>
            </table><br><br>
        </div>

        <div *ngIf="organizationEledry['אחר'] != undefined">
            <h4 class="tableTitle ">:קשישים שנרשמו דרך ארגונים אחרים</h4>
            <button class="buttons" type="submit" (click)="csvFile(organizationEledry['אחר'] , 'organization') ">ייצוא טבלת קשישים מאירגונים לאקסל</button><br><br>
            <table id="customers" class="table-style">
                <tr>
                    <th>שם הארגון</th>
                    <th>פלאפון איש קשר</th>
                    <th>שם איש קשר</th>
                    <th>טלפון קשיש</th>
                    <th>שם מלא</th>
                </tr>
                <tr *ngFor="let value of organizationEledry['אחר'] ">
                    <td>{{value.id}}</td>
                    <td>0{{value.phoneA}}</td>
                    <td>{{value.assistName}}</td>
                    <td>0{{value.phoneE}}</td>
                    <td>{{value.name}}</td>
                </tr>
            </table><br><br></div>
    </div>

    <br><br><br><br><br><br>
</ion-content>